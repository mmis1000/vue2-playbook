{"version":3,"sources":["webpack:///./src/components/recursive.js","webpack:///./src/views/Graph.vue?796b","webpack:///./src/views/Graph.vue?f832","webpack:///src/views/Graph.vue","webpack:///./src/views/Graph.vue?4373","webpack:///./src/views/Graph.vue"],"names":["SubTree","name","functional","render","createElement","context","props","template","data","TreeRoot","components","depth","fn","scopedSlots","default","vnodes","attrs","_vm","this","_h","$createElement","_c","_self","staticClass","_v","items","_u","key","ref","_l","sub","index","on","$event","stopPropagation","staticStyle","style","background","x","y","grid","containment","$set","left","top","Math","max","abs","stroke","_s","directives","rawName","value","expression","domProps","target","composing","addChild","removeMe","_e","_b","children","staticRenderFns","Drag","methods","indexOf","splice","item","push","length","component"],"mappings":"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","file":"js/graph.2cdf244f.js","sourcesContent":["export const SubTree = {\n  name: \"sub-tree\",\n  functional: true,\n  render: function (createElement, context) {\n    const { template, data } = context.props\n    return template(data)\n  }\n}\n\nexport const TreeRoot = {\n  name: \"tree-root\",\n  functional: true,\n  components: {\n    async TreeRoot() { return TreeRoot }\n  },\n  render: function (createElement, context) {\n    const data = context.props.data\n    const depth = context.props.depth || 0;\n    const fn = context.scopedSlots.default\n\n    const vnodes = [\n      fn({\n        data,\n        depth,\n        template: (data) => createElement(\n          \"tree-root\",\n          {\n            attrs: { data, depth: depth + 1 },\n            scopedSlots: context.scopedSlots\n          },\n          []\n        )\n      })\n    ]\n\n    return vnodes\n  }\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Graph.vue?vue&type=style&index=0&id=c7a19dbc&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[_c('div',{staticClass:\"top\"},[_vm._v(\"\\n    combine draggable component and recusive component, these magic can be easilly achieved\\n  \")]),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"center\"},[_c('tree-root',{attrs:{\"data\":_vm.items},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar depth = ref.depth;\nvar items = ref.data;\nvar template = ref.template;\nreturn _vm._l((items),function(sub,index){return _c('div',{key:index,staticClass:\"offseted\",on:{\"click\":function($event){$event.stopPropagation();},\"pointerdown\":function($event){$event.stopPropagation();}}},[_c('drag',{staticClass:\"main-item\",staticStyle:{\"left\":\"0\",\"top\":\"0\",\"position\":\"absolute\"},style:({ background: sub.background }),attrs:{\"left\":sub.x,\"top\":sub.y,\"options\":{ grid: [20, 20], containment: '.container' }},on:{\"update:left\":function($event){return _vm.$set(sub, \"x\", $event)},\"update:top\":function($event){return _vm.$set(sub, \"y\", $event)}}},[_c('svg',{staticStyle:{\"position\":\"absolute\",\"pointer-events\":\"none\"},style:({\n                    left: sub.x > 0 ? (\"-\" + (sub.x) + \"px\"): '0',\n                    top: sub.y > 0 ? (\"-\" + (sub.y) + \"px\"): '0'\n                  }),attrs:{\"height\":Math.max(Math.abs(sub.y), 4),\"width\":Math.max(Math.abs(sub.x), 4)}},[_c('line',{staticStyle:{\"stroke-width\":\"2\"},style:({stroke: sub.background}),attrs:{\"x1\":sub.x * sub.y > 0 ? 0: Math.abs(sub.x),\"y1\":\"0\",\"x2\":sub.x * sub.y <= 0 ? 0: Math.abs(sub.x),\"y2\":Math.abs(sub.y)}})]),_c('div',{staticClass:\"header\"},[_vm._v(\"Item Depth \"+_vm._s(depth))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(sub.x),expression:\"sub.x\"}],attrs:{\"type\":\"number\"},domProps:{\"value\":(sub.x)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(sub, \"x\", $event.target.value)}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(sub.y),expression:\"sub.y\"}],attrs:{\"type\":\"number\"},domProps:{\"value\":(sub.y)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(sub, \"y\", $event.target.value)}}}),_c('button',{on:{\"pointerdown\":function($event){return _vm.addChild(sub)}}},[_vm._v(\"Add child\")]),(depth > 0)?_c('button',{on:{\"pointerdown\":function($event){return _vm.removeMe(items, sub)}}},[_vm._v(\"Remove Me\")]):_vm._e(),_c('sub-tree',_vm._b({},'sub-tree',{depth: depth + 1, data: sub.children, template: template},false))],1)],1)})}}])})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page\">\n    <div class=\"top\">\n      combine draggable component and recusive component, these magic can be easilly achieved\n    </div>\n    <div class=\"container\">\n      <div class=\"center\">\n        <tree-root :data=\"items\" v-slot=\"{depth, data: items, template}\">\n          <div\n            v-for=\"(sub, index) in items\"\n            @click.stop\n            @pointerdown.stop\n            :key=\"index\"\n            class=\"offseted\"\n          >\n            <drag\n              style=\"left: 0; top: 0; position: absolute\"\n              :style=\"{ background: sub.background }\"\n              class=\"main-item\"\n              :left.sync=\"sub.x\"\n              :top.sync=\"sub.y\"\n              :options=\"{ grid: [20, 20], containment: '.container' }\"\n            >\n              <svg\n                style=\"position: absolute; pointer-events: none\"\n                :style=\"{\n                      left: sub.x > 0 ? `-${sub.x}px`: '0',\n                      top: sub.y > 0 ? `-${sub.y}px`: '0'\n                    }\"\n                :height=\"Math.max(Math.abs(sub.y), 4)\"\n                :width=\"Math.max(Math.abs(sub.x), 4)\"\n              >\n                <line\n                  :x1=\"sub.x * sub.y > 0 ? 0: Math.abs(sub.x)\"\n                  y1=\"0\"\n                  :x2=\"sub.x * sub.y <= 0 ? 0: Math.abs(sub.x)\"\n                  :y2=\"Math.abs(sub.y)\"\n                  style=\"stroke-width:2\"\n                  :style=\"{stroke: sub.background}\"\n                ></line>\n              </svg>\n              <div class=\"header\">Item Depth {{depth}}</div>\n              <input type=\"number\" v-model=\"sub.x\">\n              <input type=\"number\" v-model=\"sub.y\">\n              <button @pointerdown=\"addChild(sub)\">Add child</button>\n              <button v-if=\"depth > 0\" @pointerdown=\"removeMe(items, sub)\">Remove Me</button>\n              <sub-tree v-bind=\"{depth: depth + 1, data: sub.children, template}\"></sub-tree>\n            </drag>\n          </div>\n        </tree-root>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Drag from \"@/components/Drag.vue\";\nimport { SubTree, TreeRoot } from \"@/components/recursive\";\nexport default {\n  components: {\n    Drag,\n    SubTree,\n    TreeRoot\n  },\n  data() {\n    return {\n      items: [{ x: 0, y: 0, children: [], background: \"#fff\" }]\n    };\n  },\n  methods: {\n    removeMe(items, sub) {\n      var index = items.indexOf(sub)\n      if (index >= 0) {\n        items.splice(index, 1)\n      }\n    },\n    addChild(item, x, y) {\n      item.children.push({\n        x: x != null ? x : (item.children.length + 1) * 20,\n        y: y != null ? y : (item.children.length + 1) * 20,\n        background: `rgba(${192 + ~~(64 * Math.random())}, ${192 +\n          ~~(64 * Math.random())}, ${192 + ~~(64 * Math.random())}, 0.5)`,\n        children: []\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n  background: #333;\n  color: white;\n  height: 100vh;\n  flex-direction: column;\n  display: flex;\n  justify-content: stretch;\n  align-items: stretch;\n}\n.container {\n  flex-grow: 1;\n  flex-shrink: 1;\n  display: flex;\n  justify-content: center;\n}\n.center {\n  position: relative;\n}\n.offseted {\n  position: absolute;\n  left: -2px;\n  top: -2px;\n}\n.main-item {\n  > * {\n    box-sizing: border-box;\n  }\n\n  height: 96px;\n  width: 156px;\n  border: 2px solid #ccc;\n  .header {\n    height: 20px;\n    color: rgb(66, 66, 66);\n  }\n\n  > input {\n    width: 156px;\n    height: 25px;\n  }\n\n  > button {\n    display: inline-block;\n    width: 78px;\n    height: 25px;\n    line-height: 21px;\n    font-size: 0.6em;\n    padding: 0px;\n    overflow: hidden;\n    border: 2px solid #eee;\n    white-space: nowrap;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Graph.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Graph.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Graph.vue?vue&type=template&id=c7a19dbc&scoped=true&\"\nimport script from \"./Graph.vue?vue&type=script&lang=js&\"\nexport * from \"./Graph.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Graph.vue?vue&type=style&index=0&id=c7a19dbc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c7a19dbc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}